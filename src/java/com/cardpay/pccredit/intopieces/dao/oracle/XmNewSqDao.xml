<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cardpay.pccredit.intopieces.dao.XmNewSqDao" >
    <resultMap id="ResultMap" type="com.cardpay.pccredit.intopieces.model.XmNewSq">
        <result property="id" column="ID" />
		<result property="orgId" column="ORG_ID" />
		<result property="orgName" column="ORG_NAME" />
		<result property="userId" column="USER_ID" />
		<result property="productId" column="PRODUCT_ID" />
		<result property="productName" column="PRODUCT_NAME" />
		<result property="sqName" column="SQ_NAME" />
		<result property="userName" column="USER_NAME" />
		<result property="customerType" column="CUSTOMER_TYPE" />
		<result property="customerTypeCode" column="CUSTOMER_TYPE_CODE" />
		<result property="customerLevel" column="CUSTOMER_LEVEL" />
		<result property="customerLevelCode" column="CUSTOMER_LEVEL_CODE" />
		<result property="createdTime" column="CREATED_TIME" />
	</resultMap>
    
	<select id="findZaById" resultMap="ResultMap">
		 select * 
		 from xm_new_sq   
		 where ID=#{id}
	</select>
	<select id="findAllZaByFilter" resultMap="ResultMap" parameterType="com.cardpay.pccredit.intopieces.filter.XmNewSqFilter">
		SELECT * FROM
			(SELECT ROW_.*,ROWNUM ROWNUM_
				FROM (
					 SELECT *
					 FROM  xm_new_sq t
					 WHERE 1=1
					 <if test="name != null and name != '' ">
						<![CDATA[ and sq_name like '%'||#{name}||'%']]>
					 </if>
					 <if test="orgName != null and orgName != '' ">
						<![CDATA[ and org_name like '%'||#{orgName}||'%']]>
					 </if>
					  <if test="userId != null and userId != '' ">
						and user_id=#{userId}
					 </if>
					 <if test="status != null and status != '' ">
						and status=#{status}
					 </if>
			<![CDATA[
					) ROW_
				WHERE ROWNUM <= #{limit}*#{page} + #{limit}) 
			WHERE ROWNUM_ > #{limit}*#{page}
			]]>
	</select>
	<select id="findAllZaCountByFilter" resultType="int" parameterType="com.cardpay.pccredit.intopieces.filter.XmNewSqFilter">
		 SELECT count(*)
		 FROM  xm_new_sq t
		 WHERE 1=1
		 <if test="name != null and name != '' ">
			<![CDATA[ and sq_name like '%'||#{name}||'%']]>
		 </if>
	</select>
	
</mapper>